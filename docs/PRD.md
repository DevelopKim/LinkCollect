# PRD: 웹 페이지 링크 추출 크롬 확장 기능

## 1. 개요

특정 웹 페이지에서 추출 가능한 모든 링크를 필터링하여 다양한 포맷으로 출력할 수 있는 크롬 확장 기능입니다. 사용자가 지정한 도메인 조건에 맞는 링크만 추출하고, CSV 파일로 다운로드하거나 미리보기할 수 있습니다.

## 2. 목표

- 웹 페이지 내 특정 도메인을 포함한 링크를 효율적으로 추출
- 추출된 링크를 구조화된 포맷으로 저장 및 다운로드
- 사용자가 결과를 미리 확인할 수 있는 인터페이스 제공
- 향후 다양한 포맷 확장 가능한 아키텍처 설계

## 3. 기능 요구사항

### 3.1 핵심 기능

#### 3.1.1 링크 추출
- 현재 활성화된 웹 페이지에서 모든 링크 요소(`<a>` 태그) 추출
- 각 링크의 `href` 속성 값 추출
- 상대 경로는 절대 URL로 변환

#### 3.1.2 도메인 필터링
- 사용자가 설정한 도메인 패턴(예: `wowssa.co.kr`)을 기준으로 필터링
- 도메인 패턴이 URL에 포함된 모든 링크만 추출
- 필터링 조건은 사용자가 확장 기능 설정에서 지정

#### 3.1.3 결과 출력
- **CSV 파일 다운로드**: 추출된 링크를 CSV 형식으로 저장하여 다운로드
  - 컬럼: URL, 링크 텍스트, 도메인 등
- **미리보기**: 추출 결과를 확장 기능 팝업 또는 사이드바에서 확인
  - 간략 정보: "n개의 링크가 추출되었습니다"
  - 상세 정보: 추출된 모든 링크 목록 표시

#### 3.1.4 작업 모드
- **즉시 다운로드 모드**: 미리보기 없이 바로 CSV 파일 다운로드
- **미리보기 모드**: 결과 확인 후 다운로드 여부 결정

### 3.2 사용자 인터페이스

#### 3.2.1 확장 기능 아이콘
- 브라우저 툴바에 확장 기능 아이콘 표시
- 클릭 시 팝업 UI 표시

#### 3.2.2 팝업 UI 구성
- **설정 영역**
  - 도메인 필터 입력 필드
  - 작업 모드 선택 (즉시 다운로드 / 미리보기)
  - 추출 버튼

- **결과 영역** (미리보기 모드)
  - 간략 정보: "n개의 링크가 추출되었습니다"
  - 상세 정보 토글/스크롤 가능한 링크 목록
  - 다운로드 버튼

#### 3.2.3 결과 표시 형식
- 링크 목록: URL, 링크 텍스트 표시
- 클릭 가능한 링크로 표시 (새 탭에서 열기)
- 스크롤 가능한 영역에 목록 표시

### 3.3 확장성 고려사항

#### 3.3.1 포맷 추상화
- 출력 포맷을 플러그인/모듈화하여 확장 가능한 구조 설계
- CSV 외 JSON, TXT, Excel 등 추가 포맷 지원 준비
- 포맷별 변환 로직을 독립적으로 구현

#### 3.3.2 설정 관리
- 사용자 설정(도메인 필터, 기본 작업 모드 등)을 로컬 스토리지에 저장
- 설정 UI를 통한 관리 기능

## 4. 기술적 제약사항

- 크롬 확장 기능 Manifest V3 사용 (최신 표준)
- Content Script를 통한 페이지 DOM 접근
- Chrome Storage API를 통한 설정 저장
- File System Access API 또는 Blob URL을 통한 파일 다운로드

## 5. 사용 시나리오

### 시나리오 1: 즉시 다운로드
1. 사용자가 특정 웹 페이지(`example.com`) 방문
2. 확장 기능 아이콘 클릭
3. 도메인 필터 입력 (예: `wowssa.co.kr`)
4. "즉시 다운로드" 모드 선택
5. "추출" 버튼 클릭
6. CSV 파일 자동 다운로드

### 시나리오 2: 미리보기 후 다운로드
1. 사용자가 특정 웹 페이지 방문
2. 확장 기능 아이콘 클릭
3. 도메인 필터 입력
4. "미리보기" 모드 선택
5. "추출" 버튼 클릭
6. 팝업에 "n개의 링크가 추출되었습니다" 표시
7. 상세 정보 확인
8. "다운로드" 버튼 클릭하여 CSV 파일 다운로드

## 6. 성공 지표

- 링크 추출 정확도: 설정한 도메인 패턴과 일치하는 링크만 추출
- 사용자 만족도: 직관적인 UI로 쉽게 사용 가능
- 확장성: 새로운 포맷 추가 시 기존 코드 변경 최소화

## 7. 향후 계획

- 추가 출력 포맷 지원 (JSON, TXT, Excel 등)
- 필터링 조건 확장 (정규식 지원, 여러 도메인 동시 필터링)
- 링크 분류 기능 (내부 링크/외부 링크 구분)
- 배치 처리 기능 (여러 페이지에서 동시 추출)

## 8. 비기능 요구사항

- 성능: 대량의 링크가 있는 페이지에서도 빠른 추출 (5초 이내)
- 사용성: 직관적인 UI, 최소한의 클릭으로 작업 완료
- 호환성: 최신 크롬 브라우저 지원
- 안정성: 에러 발생 시 사용자에게 명확한 메시지 표시
